import{S as ie,i as oe,s as fe,k as g,a as P,l as p,m,c as N,h,n as u,b as w,B as d,A as x,D as ce,L as Me,M as J,N as Ce,q as T,r as I,u as R,v as ue,w as he,x as de,f as V,t as M,y as _e,e as ke,d as Ve,g as je,E as Oe,F as Ue,G as Le}from"../../../chunks/index-e1a9c520.js";import{c as ze}from"../../../chunks/config-d638e341.js";import{A as Re}from"../../../chunks/Avatar-4f31f444.js";import{b as q}from"../../../chunks/paths-6cd3a76e.js";let{size:$}=ze.paginator;$%2==0&&$++;class qe{constructor(e,l){if(!e||!l)throw new TypeError;let s=e[l];this.pages=s.pages,this.length=s.length,this.actual=1}get first(){return 1}get last(){return this.pages}get prev(){return Math.max(1,this.actual-1)}get next(){return Math.min(this.pages,this.actual+1)}get withControls(){return this.pages>$}*items(){const e=$-1>>>1;let l=Math.max(1,this.actual-e),s=Math.min(this.pages,this.actual+e),i;(i=s-this.actual)<e?l-=e-i:(i=this.actual-l)<e&&(s+=e-i);for(var t=l;t<=s;t++)yield t}normalize(e){if(this._maxDigits)return e.toString().padStart(this._maxDigits,"0");let l=0;for(let s=this.pages;s>0;s=~~(s/10))l++;return this._maxDigits=l,console.log(this._maxDigits),this.normalize(e)}}function we(o,e,l){const s=o.slice();return s[0]=e[l],s}function Pe(o){let e,l,s,i,t,f,r,a,c;return{c(){e=g("button"),l=g("span"),i=P(),t=g("button"),f=g("span"),this.h()},l(n){e=p(n,"BUTTON",{class:!0,"data-page":!0});var _=m(e);l=p(_,"SPAN",{class:!0}),m(l).forEach(h),_.forEach(h),i=N(n),t=p(n,"BUTTON",{class:!0,"data-page":!0});var A=m(t);f=p(A,"SPAN",{class:!0}),m(f).forEach(h),A.forEach(h),this.h()},h(){u(l,"class","fa-solid fa-angles-left"),u(e,"class","btn"),u(e,"data-page",s=o[1].first),u(f,"class","fa-solid fa-angle-left"),u(t,"class","btn"),u(t,"data-page",r=o[1].prev)},m(n,_){w(n,e,_),d(e,l),w(n,i,_),w(n,t,_),d(t,f),a||(c=[J(e,"click",o[2]),J(t,"click",o[2])],a=!0)},p(n,_){_&2&&s!==(s=n[1].first)&&u(e,"data-page",s),_&2&&r!==(r=n[1].prev)&&u(t,"data-page",r)},d(n){n&&h(e),n&&h(i),n&&h(t),a=!1,Ce(c)}}}function Ne(o){let e,l=o[1].normalize(o[0])+"",s,i,t,f,r;return{c(){e=g("button"),s=T(l),this.h()},l(a){e=p(a,"BUTTON",{class:!0,"data-page":!0});var c=m(e);s=I(c,l),c.forEach(h),this.h()},h(){u(e,"class",i="btn "+(o[1].actual===o[0]?"btn-active":"")),u(e,"data-page",t=o[0])},m(a,c){w(a,e,c),d(e,s),f||(r=J(e,"click",o[2]),f=!0)},p(a,c){c&2&&l!==(l=a[1].normalize(a[0])+"")&&R(s,l),c&2&&i!==(i="btn "+(a[1].actual===a[0]?"btn-active":""))&&u(e,"class",i),c&2&&t!==(t=a[0])&&u(e,"data-page",t)},d(a){a&&h(e),f=!1,r()}}}function Ae(o){let e,l,s,i,t,f,r,a,c;return{c(){e=g("button"),l=g("span"),i=P(),t=g("button"),f=g("span"),this.h()},l(n){e=p(n,"BUTTON",{class:!0,"data-page":!0});var _=m(e);l=p(_,"SPAN",{class:!0}),m(l).forEach(h),_.forEach(h),i=N(n),t=p(n,"BUTTON",{class:!0,"data-page":!0});var A=m(t);f=p(A,"SPAN",{class:!0}),m(f).forEach(h),A.forEach(h),this.h()},h(){u(l,"class","fa-solid fa-angle-right"),u(e,"class","btn"),u(e,"data-page",s=o[1].next),u(f,"class","fa-solid fa-angles-right"),u(t,"class","btn"),u(t,"data-page",r=o[1].last)},m(n,_){w(n,e,_),d(e,l),w(n,i,_),w(n,t,_),d(t,f),a||(c=[J(e,"click",o[2]),J(t,"click",o[2])],a=!0)},p(n,_){_&2&&s!==(s=n[1].next)&&u(e,"data-page",s),_&2&&r!==(r=n[1].last)&&u(t,"data-page",r)},d(n){n&&h(e),n&&h(i),n&&h(t),a=!1,Ce(c)}}}function Fe(o){let e,l,s,i=o[1].withControls&&Pe(o),t=[...o[1].items()],f=[];for(let a=0;a<t.length;a+=1)f[a]=Ne(we(o,t,a));let r=o[1].withControls&&Ae(o);return{c(){e=g("div"),i&&i.c(),l=P();for(let a=0;a<f.length;a+=1)f[a].c();s=P(),r&&r.c(),this.h()},l(a){e=p(a,"DIV",{class:!0});var c=m(e);i&&i.l(c),l=N(c);for(let n=0;n<f.length;n+=1)f[n].l(c);s=N(c),r&&r.l(c),c.forEach(h),this.h()},h(){u(e,"class","btn-group my-4 mx-auto flex-wrap")},m(a,c){w(a,e,c),i&&i.m(e,null),d(e,l);for(let n=0;n<f.length;n+=1)f[n].m(e,null);d(e,s),r&&r.m(e,null)},p(a,[c]){if(a[1].withControls?i?i.p(a,c):(i=Pe(a),i.c(),i.m(e,l)):i&&(i.d(1),i=null),c&6){t=[...a[1].items()];let n;for(n=0;n<t.length;n+=1){const _=we(a,t,n);f[n]?f[n].p(_,c):(f[n]=Ne(_),f[n].c(),f[n].m(e,s))}for(;n<f.length;n+=1)f[n].d(1);f.length=t.length}a[1].withControls?r?r.p(a,c):(r=Ae(a),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:x,o:x,d(a){a&&h(e),i&&i.d(),ce(f,a),r&&r.d()}}}function Ge(o,e,l){let s,{res:i}=e,{page:t=1}=e;const f=Me();function r(a){const n=+a.target.closest(".btn").dataset.page;a.preventDefault(),s.actual!==n&&(l(1,s.actual=n,s),f("changePage",s.actual))}return o.$$set=a=>{"res"in a&&l(3,i=a.res),"page"in a&&l(0,t=a.page)},o.$$.update=()=>{o.$$.dirty&8&&l(1,s=new qe(i,"posts")),o.$$.dirty&1&&l(1,s.actual=t,s)},[t,s,r,i]}class He extends ie{constructor(e){super(),oe(this,e,Ge,Fe,fe,{res:3,page:0})}}const{maxLength:De}=ze.posts.body;function Se(o){if(o.length>De){const e=De-3;return o.substring(0,e)+"..."}return o}function Te(o,e,l){const s=o.slice();return s[6]=e[l],s}function Ie(o){let e,l,s,i,t=o[6].name+"",f,r,a;return{c(){e=g("btn"),l=g("span"),s=P(),i=g("a"),f=T(t),a=P(),this.h()},l(c){e=p(c,"BTN",{class:!0});var n=m(e);l=p(n,"SPAN",{class:!0}),m(l).forEach(h),s=N(n),i=p(n,"A",{href:!0,class:!0});var _=m(i);f=I(_,t),_.forEach(h),a=N(n),n.forEach(h),this.h()},h(){u(l,"class","fa-solid fa-tag"),u(i,"href",r=q+"/posts/?cat="+o[6].id),u(i,"class","link link-hover"),u(e,"class","badge badge-lg badge-ghost gap-2 mr-2")},m(c,n){w(c,e,n),d(e,l),d(e,s),d(e,i),d(i,f),d(e,a)},p(c,n){n&16&&t!==(t=c[6].name+"")&&R(f,t),n&16&&r!==(r=q+"/posts/?cat="+c[6].id)&&u(i,"href",r)},d(c){c&&h(e)}}}function xe(o){let e,l,s,i,t,f,r,a,c,n,_,A=Se(o[1])+"",K,ee,y,j,B,F,te,Q,ae,O,le,C,U,G=o[2].name+"",W,X,se,z,D;s=new Re({props:{name:o[2].name}});let L=o[4],E=[];for(let b=0;b<L.length;b+=1)E[b]=Ie(Te(o,L,b));return{c(){e=g("article"),l=g("div"),ue(s.$$.fragment),i=P(),t=g("div"),f=g("a"),r=g("h1"),a=T(o[0]),n=P(),_=g("div"),K=T(A),ee=P(),y=g("div"),j=g("div"),B=g("span"),F=g("span"),te=T("\xA0"),Q=T(o[5]),ae=P(),O=g("p"),le=T("by:\xA0"),C=g("a"),U=g("span"),W=T(G),se=P(),z=g("div");for(let b=0;b<E.length;b+=1)E[b].c();this.h()},l(b){e=p(b,"ARTICLE",{tabindex:!0,class:!0});var k=m(e);l=p(k,"DIV",{class:!0});var S=m(l);he(s.$$.fragment,S),S.forEach(h),i=N(k),t=p(k,"DIV",{class:!0});var v=m(t);f=p(v,"A",{href:!0,class:!0});var H=m(f);r=p(H,"H1",{class:!0});var ge=m(r);a=I(ge,o[0]),ge.forEach(h),H.forEach(h),n=N(v),_=p(v,"DIV",{class:!0});var pe=m(_);K=I(pe,A),pe.forEach(h),ee=N(v),y=p(v,"DIV",{class:!0});var Y=m(y);j=p(Y,"DIV",{class:!0,"data-tip":!0});var me=m(j);B=p(me,"SPAN",{class:!0});var Z=m(B);F=p(Z,"SPAN",{class:!0}),m(F).forEach(h),te=I(Z,"\xA0"),Q=I(Z,o[5]),Z.forEach(h),me.forEach(h),ae=N(Y),O=p(Y,"P",{});var ne=m(O);le=I(ne,"by:\xA0"),C=p(ne,"A",{href:!0,class:!0});var be=m(C);U=p(be,"SPAN",{class:!0});var ve=m(U);W=I(ve,G),ve.forEach(h),be.forEach(h),ne.forEach(h),Y.forEach(h),se=N(v),z=p(v,"DIV",{class:!0});var Ee=m(z);for(let re=0;re<E.length;re+=1)E[re].l(Ee);Ee.forEach(h),v.forEach(h),k.forEach(h),this.h()},h(){u(l,"class","flex items-center justify-center sm:float-left"),u(r,"class","text-xl font-extrabold my-2"),u(f,"href",c=q+"/view/post/?id="+o[3]),u(f,"class","link link-hover basis-full sm:flex-auto"),u(_,"class","basis-full overflow-y-auto"),u(F,"class","fa-solid fa-thumbs-up"),u(B,"class","badge badge-primary gap-2"),u(j,"class","tooltip"),u(j,"data-tip","Reactions"),u(U,"class","font-bold"),u(C,"href",X=q+"/view/author/?id="+o[3]),u(C,"class","link"),u(y,"class","my-2 text-sm basis-full text-right inline-flex gap-2 justify-between md:justify-start"),u(z,"class","text-left my-2 text-bg-300 sm:text-right"),u(t,"class","flex flex-row flex-wrap sm:flex-row mx-4"),u(e,"tabindex","0"),u(e,"class","flex flex-row flex-wrap sm:flex-nowrap bg-base-300 text-base-content rounded border border-neutral align-middle mt-4")},m(b,k){w(b,e,k),d(e,l),de(s,l,null),d(e,i),d(e,t),d(t,f),d(f,r),d(r,a),d(t,n),d(t,_),d(_,K),d(t,ee),d(t,y),d(y,j),d(j,B),d(B,F),d(B,te),d(B,Q),d(y,ae),d(y,O),d(O,le),d(O,C),d(C,U),d(U,W),d(t,se),d(t,z);for(let S=0;S<E.length;S+=1)E[S].m(z,null);D=!0},p(b,[k]){const S={};if(k&4&&(S.name=b[2].name),s.$set(S),(!D||k&1)&&R(a,b[0]),(!D||k&8&&c!==(c=q+"/view/post/?id="+b[3]))&&u(f,"href",c),(!D||k&2)&&A!==(A=Se(b[1])+"")&&R(K,A),(!D||k&32)&&R(Q,b[5]),(!D||k&4)&&G!==(G=b[2].name+"")&&R(W,G),(!D||k&8&&X!==(X=q+"/view/author/?id="+b[3]))&&u(C,"href",X),k&16){L=b[4];let v;for(v=0;v<L.length;v+=1){const H=Te(b,L,v);E[v]?E[v].p(H,k):(E[v]=Ie(H),E[v].c(),E[v].m(z,null))}for(;v<E.length;v+=1)E[v].d(1);E.length=L.length}},i(b){D||(V(s.$$.fragment,b),D=!0)},o(b){M(s.$$.fragment,b),D=!1},d(b){b&&h(e),_e(s),ce(E,b)}}}function Je(o,e,l){let{title:s}=e,{body:i}=e,{author:t}=e,{id:f}=e,{categories:r}=e,{reactions:a}=e;return o.$$set=c=>{"title"in c&&l(0,s=c.title),"body"in c&&l(1,i=c.body),"author"in c&&l(2,t=c.author),"id"in c&&l(3,f=c.id),"categories"in c&&l(4,r=c.categories),"reactions"in c&&l(5,a=c.reactions)},[s,i,t,f,r,a]}class Ke extends ie{constructor(e){super(),oe(this,e,Je,xe,fe,{title:0,body:1,author:2,id:3,categories:4,reactions:5})}}function ye(o,e,l){const s=o.slice();return s[2]=e[l],s}function Qe(o){let e,l,s,i;return{c(){e=g("article"),l=g("div"),s=g("span"),i=T("Sin resultados..."),this.h()},l(t){e=p(t,"ARTICLE",{class:!0});var f=m(e);l=p(f,"DIV",{class:!0});var r=m(l);s=p(r,"SPAN",{});var a=m(s);i=I(a,"Sin resultados..."),a.forEach(h),r.forEach(h),f.forEach(h),this.h()},h(){u(l,"class","alert alert-info shadow-lg"),u(e,"class","p-4")},m(t,f){w(t,e,f),d(e,l),d(l,s),d(s,i)},p:x,i:x,o:x,d(t){t&&h(e)}}}function We(o){let e,l,s,i=o[0].posts.rows,t=[];for(let r=0;r<i.length;r+=1)t[r]=Be(ye(o,i,r));const f=r=>M(t[r],1,1,()=>{t[r]=null});return l=new He({props:{res:o[0]}}),l.$on("changePage",Ye),{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=P(),ue(l.$$.fragment)},l(r){for(let a=0;a<t.length;a+=1)t[a].l(r);e=N(r),he(l.$$.fragment,r)},m(r,a){for(let c=0;c<t.length;c+=1)t[c].m(r,a);w(r,e,a),de(l,r,a),s=!0},p(r,a){if(a&1){i=r[0].posts.rows;let n;for(n=0;n<i.length;n+=1){const _=ye(r,i,n);t[n]?(t[n].p(_,a),V(t[n],1)):(t[n]=Be(_),t[n].c(),V(t[n],1),t[n].m(e.parentNode,e))}for(je(),n=i.length;n<t.length;n+=1)f(n);Ve()}const c={};a&1&&(c.res=r[0]),l.$set(c)},i(r){if(!s){for(let a=0;a<i.length;a+=1)V(t[a]);V(l.$$.fragment,r),s=!0}},o(r){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)M(t[a]);M(l.$$.fragment,r),s=!1},d(r){ce(t,r),r&&h(e),_e(l,r)}}}function Be(o){let e,l;const s=[o[2]];let i={};for(let t=0;t<s.length;t+=1)i=Oe(i,s[t]);return e=new Ke({props:i}),{c(){ue(e.$$.fragment)},l(t){he(e.$$.fragment,t)},m(t,f){de(e,t,f),l=!0},p(t,f){const r=f&1?Ue(s,[Le(t[2])]):{};e.$set(r)},i(t){l||(V(e.$$.fragment,t),l=!0)},o(t){M(e.$$.fragment,t),l=!1},d(t){_e(e,t)}}}function Xe(o){let e,l,s,i;const t=[We,Qe],f=[];function r(a,c){return a[0]?0:1}return e=r(o),l=f[e]=t[e](o),{c(){l.c(),s=ke()},l(a){l.l(a),s=ke()},m(a,c){f[e].m(a,c),w(a,s,c),i=!0},p(a,[c]){let n=e;e=r(a),e===n?f[e].p(a,c):(je(),M(f[n],1,1,()=>{f[n]=null}),Ve(),l=f[e],l?l.p(a,c):(l=f[e]=t[e](a),l.c()),V(l,1),l.m(s.parentNode,s))},i(a){i||(V(l),i=!0)},o(a){M(l),i=!1},d(a){f[e].d(a),a&&h(s)}}}function Ye(o){const e=o.detail;console.log("changedPaged:"+e)}function Ze(o,e,l){let s,{data:i}=e;return o.$$set=t=>{"data"in t&&l(1,i=t.data)},o.$$.update=()=>{o.$$.dirty&2&&l(0,s=i.data)},[s,i]}class lt extends ie{constructor(e){super(),oe(this,e,Ze,Xe,fe,{data:1})}}export{lt as default};
